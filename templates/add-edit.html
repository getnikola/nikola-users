{% extends "base.html" %}
{% if data %}
{% set title = 'Edit' %}
{% else %}
{% set title = 'Add' %}
{% endif %}
{% block content %}

<form class="form-horizontal" method="POST" action="">
    {% if data %}
    <input type="hidden" name="edit" value="1">
    {% endif %}
    <div class="form-group">
        <label class="control-label col-lg-2" for="inputTitle">Title</label>
        <div class="col-lg-5">
            <input type="text" class="form-control" name="title" id="inputTitle" placeholder="Title"
            {% if data %}value="{{ data.title|e }}"{% endif %}
            required>
            <span class="help-block">Should be the same as <tt>BLOG_TITLE</tt>.</span>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-lg-2" for="inputAuthor">Author</label>
        <div class="col-lg-5">
            <input type="text" class="form-control" name="author" id="inputAuthor" placeholder="Author"
            {% if data %}value="{{ data.author|e }}"{% endif %}
            required>
            <span class="help-block">Pseudonym, real name, what floats your
                boat.</span>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-lg-2" for="inputEmail">Email</label>
        <div class="col-lg-5">
            <input type="email" class="form-control" name="email" id="inputEmail" placeholder="Email"
            {% if data %}value="{{ data.email|e }}"{% endif %}
            required>
            <span class="help-block">Will not be published if you do not want to.</span>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-lg-2" for="inputURL">URL</label>
        <div class="col-lg-5">
            <input type="url" class="form-control" name="url" id="inputURL" placeholder="URL" required
            {% if data %}value="{{ data.url|e }}"{% endif %}
            >
            <span class="help-block">Should be the same as <tt>SITE_URL</tt>.</span>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-lg-2" for="inputDescription">Description</label>
        <div class="col-lg-5">
            <textarea name="description" class="form-control" id="inputDescription" placeholder="Description"
                maxlength="250" required rows="5">{% if data %}{{
                data.description|e }}{% endif %}</textarea>
            <span class="help-block">Up to 250 characters.  (weâ€™re quite
                generous!)</span>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-lg-2" for="inputSource">Site source</label>
        <div class="col-lg-5">
            <input type="url" class="form-control" name="sourcelink" id="inputSource"
            placeholder="Site source"
            {% if data and data.sourcelink %}value="{{ data.sourcelink|e }}"{% endif %}
            >
            <span class="help-block">Link to your site source on GitHub (if any)</span>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-lg-2" for="selectLanguages">Languages</label>
        <div class="col-lg-5">
            <select multiple name="languages" id="selectLanguages" class="form-control"
                required>
                {% for i in langs %}
                <option
                {% if data and i in data.languages_names() %}
                selected
                {% endif %}
                >
                {{ i }}
                </option>
                {% endfor %}
            </select>
            <span class="help-block">Languages your site is in.  (choose at
                least one)</span>
        </div>
    </div>
    <div class="form-group">
        <div class="col-lg-offset-2 col-lg-5">
            {% if session.username %}
            <label class="checkbox">
                <input name="visible" type="checkbox" {% if data and
                data.visible %}checked{% endif %}> Show this page.
                [admin only]
            </label>
            {% endif %}
            <label class="checkbox">
                <input name="tos" type="checkbox" required
                {% if data %}checked disabled{% endif %}
                > I agree to the <a
                    href="/tos/">Terms of
                    Service and Privacy Policy</a>.
            </label>
            <label class="checkbox">
                <input name="publishemail" type="checkbox" {% if
                data and data.publishemail %}checked{% endif %}> I want my e-mail
                visible publicly.
            </label>
            <button type="submit" class="btn btn-primary">
                {% if data %}
                    Edit
                {% else %}
                    Request addition
                {% endif %}
            </button>
        </div>
    </div>
</form>

{% endblock %}
